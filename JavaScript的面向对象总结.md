# JavaScript的面向对象总结

**从入门到放弃**

入门JavaScript以来，看了很多对js面向对象的理解和总结，解释的角度各有不同，越看越糊涂，今天总结一个自己理解的面向对象，如有写的不对的地方欢迎大家指正。

## 基本概念

理解面向对象之前，先要了解一下基本概念。

- 函数/方法
- 对象
- 类
- 构造函数
- 实例
- 面向对象
- 继承
- 多态
- 链式调用

其实大部分概念在实际开发中很常见，例如经常用数组的方法，但不知道那是面向对象的概念，下面我们就一步一步走向对象。

## 函数/方法

### 什么是`函数` 

`函数`是用`function` 关键字定义，由事件驱动执行或被调用可执行并且可复用的代码块。
函数可分为`具名函数`和`匿名函数`。有名字的函数就是 `具名函数`，没名字的就是`匿名函数`。

`函数`的声明方式有两种，`函数声明`和`函数表达式`。

	function foo() {
		console.log('老子就是一个函数');
	}

	var bar = function () {
		console.log('我也是一个函数');
	};

我们可以直接调用**函数名**

	foo(); // 我是一个函数
	bar(); // 我也是一个函数

> 函数的命名规则，函数表达式，自执行函数，高阶函数，闭包，同步异步，函数节流等都是函数中的重要概念。
> 但上述内容非本文重点，飘过~

在JavaScript这种弱类型语言中，直接调用函数名的叫`函数`。

### 什么是方法

通常我们把**对象**中定义的成员函数叫做`方法`。

	var obj = {
		baz: function () {
			console.log('我是在对象内定义的函数，通过对象调用，所以我叫方法');
		}
	};

	obj.baz();
	
函数和方法，本质无区别，只是为了区分使用场景而定义的概念，所以他们的概念并不是绝对的。

## 对象

### 什么是对象

现在我们谈论的**对象**是JavaScript中的一个数据类型。 

一、`对象`属于JavaScript中的引用类型之一  
JavaScript中数据的类型可分为`基本数据类型`和`复杂数据类型`，也可称为`值类型`和`引用类型`。  引用类型还包括**数组**和**函数**

二、`对象`是多个变量与该变量对应值的**无序集合**
这个无序集合所包含的每一项都是该对象的成员，

三、`对象`中变量值为`函数`的，叫`方法`  
其实 `方法`就是`函数`，只不过写在**对象里的函数**，并且**通过对象来调用的函数**，我们称之为`方法`

四、`对象`中变量值为**`非函数`**的叫`属性`  
非函数的值包括：**值类型**、引用类型中的**数组**和我们现在所描述的**对象**，就是说当前变量的值为函数以外任意类型的值时，这个变量都叫`属性`。

一句话描述对象：__对象是由一对花括号与0个或多个成对键值对无序构成的引用类型数据结构的封装。__

### 创建对象

#### 字面量创建对象

创建对象的方式有多种，其中最常见的是`字面量`方式。我们声明一个变量，定义其值为一个`对象`，这种方式叫**字面量**，又叫**直接量**。

	var foo = {};

等号右侧的一对花括号就表示一个`对象`，在花括号里添加的成员**属性**和**方法**。

	var foo = {
	    name: '张三', 
	    say: function() {
	        console.log(this.name);
	    }
	};
	
`name` 为属性，因为它的值是非函数。  
冒号左侧为`属性名`，而冒号右侧为`属性值`。  
属性的值可以是任意类型的，值为函数的是`方法`。  
`say`函数就是`foo`对象中的方法，叫它**foo的say方法**。  

#### 构造函数创建对象

我们还可以通过`new`关键字，配合一个`构造函数`来创建一个对象，这个`对象`我们叫它`实例对象`。  

`构造函数`的概念涉及到`类`的概念，在Java等一些典型的OOP语言中，都会存在类的概念。然而JavaScript不是基于类的，所以没有类的概念，原因见下文。

## 类

### JavaScript中的类

因为JavaScript不是基于类的，而是通过构造函数和原型链（prototype chains）模拟的类，所以JavaScript中**`不存在真正意义的类`**。

> 尽管ES6中有了class，但它也还是原型继承，与php、Java和Ruby中的类的概念，依然有着本质的区别。

## 构造函数

### 什么是构造函数

`构造函数`又叫`构造器`（constructor），构造函数其实就是一个**`普通函数`**，同样是用`function`关键字来定义，同样有函数名，同样有参数，也同样有函数体，只不过是函数名首字母为大写，用来构造生成对象的函数。

	function Plants() {
		// ...
	}

### 定义构造函数

ES5中，构造函数是用`function`关键字定义的一个函数名**首字母大写**的`普通函数`，内部使用`this`来定义实例对象上的属性与方法。

	function Person() {
	    this.name = '李四';
	    this.say = function() {
			console.log('我叫' + this.name);
		};
	}

ES6可以用`class`关键字来定义一个类，有独自的构造函数`constructor`  

	class Person {
		constructor() {
			this.name = '李四';
		}
		say() {
			console.log(`我叫${this.name}`);
		}
	}

### 构造函数特点

...

## 实例

### 什么是实例

`实例`就是一类事物的一个具体对象，在JavaScript中，通过`构造函数`生成的`对象`就是这个类的一个`实例`，这个`对象`就是`实例对象`。

无论哪种方式创建的，都通过`new`关键字来生成一个对象。

	var people = new Person();
	
此时`people`就是一个对象，而且是`Person`的一个实例对象。
`people`自身有着构造函数给定义的`name`属性和`say`方法。

可以通过`people`对象来访问和调用自身属性与方法。

	people.say();
	// 我叫李四

如此我们就实现了一个由**构造函数创建的对象**。

那么问题来了，哪里能用到`类`？我们能用`对象`能做什么？或者为什么要用到`对象`？
接下来我们带着问题，从一个全新的维度来理解**`面向对象`**。

## 面向对象

暂时抛开JavaScript数据类型中的对象。

### 什么是面向对象

`一切事物皆对象`：无论在现实世界还是在计算机世界，把一切的事物都看做对象，

例如现实世界中，生物类中有动物类和植物类，而动物中有鸟类、鱼类，植物类也有很多种类。

这些类最终都会具体到个体，每个个体就是这个类的一个实例，每个实例都有着不同的属性和行为，然而这些属性和行为都可以用对象的方式来描述。

> MDN：面向对象编程是用抽象方式创建基于现实世界模型的一种编程模式。

意思很明确，JavaScript是用对象这种数据结构来具象的描述现实世界事物特征的。

	function Animal() {
		this.species = '动物';
	}
	
	function Dog(name, color) {
		this.name = name;
		this.color = color;
	}

## 继承

### 什么是继承

我们会用`类`来抽象的描述一类事物，这些**大类**可能会细分一些**小类**，我们叫`子类`，这个**大类**是这些`子类`的`父类`。

`子类`可能会拥有自`父类`的一些**相同的特征**，而`子类`传承`父类`特征和行为，这就是`继承`。

### 为什么要继承

在代码中，子类不仅可能会有与父类相同的属性和行为，可能还会扩展不同的特性，在实际开发中，我们不可能在子类中重新写相同的代码，所以要用到继承。

### 如何继承

JavaScript被众多开发者总结了很多继承方式：

- 原型链
- 借用构造函数
- 组合继承
- 原型式继承
- 寄生式继承
- 寄生组合式继承

……
